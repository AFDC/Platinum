- content_for :title, "AFDC Teams"
= render :partial => '/pageheader', :locals => {:subtitle => 'Search'}

%div{:style => 'text-align: right;'}
	= form_tag teams_path, :class => 'form-search', :method => 'GET' do
		= search_field_tag 'query', params[:query], :class => 'input-medium search-query'
		= button_tag 'Search', :name => nil, :type => 'submit', :class => "btn"

- if @team_list.count > 0
	%table.table.table-striped.tablesorter
		%thead
			%tr
				%th Team
				%th League
				%th Sport
				%th Rank
				%th Wins
				%th Losses
				%th Pct
				%th Pt. Diff.
		%tbody
			- @team_list.each do |team|
				%tr{:style => 'text-transform: capitalize'}
					- stats = team.stats
					%td= link_to team.name, team
					%td= link_to team.league.name, team.league
					%td= team.league.sport
					%td= stats ? stats['rank'] : '-'
					%td= stats ? stats['wins'] : '-'
					%td= stats ? stats['losses'] : '-'
					%td= stats ? '%.3f' % (stats['wins'].to_f/(stats['wins']+stats['losses'])) : '-'
					%td= stats ? (stats['point_differential'] ? stats['point_differential'] : '0') : '-'
- elsif @user_list.is_a?(Array)
	%p{:style => 'text-align: center;'} Please enter a search term in the box above to search the AFDC's member directory.
- else
	.alert.alert-warning No results found for your search query.
